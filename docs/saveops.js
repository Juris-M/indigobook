(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{173:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},174:function(t,e,n){"use strict";var r=n(9),a=n(65).filter,i=n(49),s=n(66),o=i("filter"),u=s("filter");r({target:"Array",proto:!0,forced:!o||!u},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},175:function(t,e,n){"use strict";var r=n(9),a=n(176).trim;r({target:"String",proto:!0,forced:n(177)("trim")},{trim:function(){return a(this)}})},176:function(t,e,n){var r=n(20),a="["+n(173)+"]",i=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),o=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(i,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:o(1),end:o(2),trim:o(3)}},177:function(t,e,n){var r=n(3),a=n(173);t.exports=function(t){return r((function(){return!!a[t]()||"​᠎"!="​᠎"[t]()||a[t].name!==t}))}},178:function(t,e,n){"use strict";n.r(e);n(47),n(29),n(19),n(28),n(48),n(104),n(64),n(174),n(106);var r=n(17),a=n.n(r);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n,r,a,i,s){try{var o=t[i](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){s(i,r,a,o,u,"next",t)}function u(t){s(i,r,a,o,u,"throw",t)}o(void 0)}))}}var u=function(t,e,n){var r=t.message;e&&(r="".concat(e,": ").concat(r)),n||console.log(r)},c=function(t){return JSON.parse(JSON.stringify(t))},p=function(t){return"style_".concat(t,".txt")},f=function(){var t=o(regeneratorRuntime.mark((function t(e,n){var r,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.apiMethod?e.apiMethod:"get",i=[e.apiSection,e.repoPath,e.apiSuffix].filter((function(t){return t})).join("/"),t.next=4,a()({method:r,url:"".concat("https://api.github.com","/").concat(i),headers:{Authorization:"token ".concat(e.apiToken)},data:e.params}).catch((function(t){return u(t,"API fail",n)}));case 4:return s=t.sent,t.abrupt("return",!!s&&s.data);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=function t(e){i(this,t),this.repo=d.bind({apiToken:e}),this.me=g.bind({apiToken:e})},l=function t(e){i(this,t),e=c(e),this.apiMethod="get",this.apiSection="repos",this.repoPath=e.result.full_name,this.apiSuffix=!1,this.info=m.bind(e),this.fork=w.bind(e),this.commits=k.bind(e),this.patch=R.bind(e),this.getBranch=I.bind(e),this.deleteBranch=M.bind(e),this.setBranch=P.bind(e),this.getContents=O.bind(e),this.updateContents=B.bind(e),this.createPullRequest=L.bind(e)};function m(){return this.result}function d(t,e){return x.apply(this,arguments)}function x(){return(x=o(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=c(this)).apiMethod="get",r.apiSection="repos",r.repoPath=e,r.apiSuffix=!1,t.next=7,f(r,n);case 7:return r.result=t.sent,t.abrupt("return",new l(r));case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=o(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=c(this)).apiSection="user",t.next=4,f(e);case 4:return e.result=t.sent,t.abrupt("return",new l(e));case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function w(t){return b.apply(this,arguments)}function b(){return(b=o(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=c(this)).apiMethod="post",n.apiSection="repos",n.repoPath=e,n.apiSuffix="forks",t.next=7,f(n);case 7:return n.result=t.sent,t.abrupt("return",new l(n));case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function k(){return y.apply(this,arguments)}function y(){return(y=o(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=c(this)).apiSuffix="commits?sha=master",t.next=4,f(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function R(t){return S.apply(this,arguments)}function S(){return(S=o(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=c(this)).apiMethod="patch",n.apiSuffix="git/refs/heads/master",n.params={sha:e,force:!0},t.next=6,f(n);case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function I(t,e){return T.apply(this,arguments)}function T(){return(T=o(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=c(this)).apiSuffix="git/ref/heads/".concat(e),t.next=4,f(r,n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function M(t){return E.apply(this,arguments)}function E(){return(E=o(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=c(this)).apiMethod="delete",n.apiSuffix="git/refs/heads/".concat(e),t.next=5,f(n);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function P(t,e){return C.apply(this,arguments)}function C(){return(C=o(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=c(this)).apiMethod="post",r.apiSuffix="git/refs",r.params={ref:"refs/heads/".concat(e),sha:n},t.next=6,f(r);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function O(t){return N.apply(this,arguments)}function N(){return(N=o(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c(this),r=p(e),n.apiSuffix="contents/".concat(r,"?ref=").concat(encodeURIComponent(e)),t.next=5,f(n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function B(t,e,n,r){return J.apply(this,arguments)}function J(){return(J=o(regeneratorRuntime.mark((function t(e,n,r,a){var i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c(this),s=p(e),i.apiMethod="put",i.apiSuffix="contents/".concat(s),i.params={message:n,content:r,branch:e},a&&(i.params.sha=a),t.next=8,f(i);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function L(t,e,n){return _.apply(this,arguments)}function _(){return(_=o(regeneratorRuntime.mark((function t(e,n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=c(this)).apiMethod="post",a.apiSuffix="pulls",a.params={title:"Citation: ".concat(e),head:"".concat(n,":").concat(e),base:"master",body:r,maintainer_can_modify:!0},t.next=6,f(a);case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var j=new function t(){i(this,t),this.client=function(t){return new h(t)}},A=function(){var t=o(regeneratorRuntime.mark((function t(e,n){var r,a,i,s,o,c,p,f,h,l,m,d,x,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="Citation: style_".concat(e,".txt"),a=window.localStorage.getItem("access_token"),i=j.client(a),t.next=5,i.repo("Juris-M/jsti-indigobook");case 5:return s=t.sent,t.next=8,i.me();case 8:return o=t.sent,c=o.info(),p=c.login,c.id,t.next=14,i.repo("".concat(p,"/jsti-indigobook"),!0);case 14:if(f=t.sent,(h=f.info()).full_name){t.next=20;break}return t.next=19,o.fork("Juris-M/jsti-indigobook").catch((function(t){return u(t,"create fork")}));case 19:h=t.sent;case 20:return t.next=22,s.commits();case 22:if(0===(l=t.sent).length){t.next=27;break}return m=l[0].sha,t.next=27,f.patch(m);case 27:return t.next=29,f.getBranch(e,!0);case 29:if(!t.sent){t.next=33;break}return t.next=33,f.deleteBranch(e);case 33:return t.next=35,f.setBranch(e,m);case 35:return t.sent,t.next=38,f.getContents(e);case 38:if(h=t.sent,d=btoa(n),h){t.next=47;break}return t.next=43,f.updateContents(e,r,d);case 43:return t.next=45,s.createPullRequest(e,p);case 45:t.next=54;break;case 47:if(x=h.content.split("\n").join(""),d===x){t.next=54;break}return g=h.sha,t.next=52,f.updateContents(e,r,d,g);case 52:return t.next=54,s.createPullRequest(e,p);case 54:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),U=(n(105),n(175),function(t,e,n,r){var a=JSON.stringify(t.map((function(t){return t.id})),null,2),i=JSON.stringify(e,null,2),s=JSON.stringify(t,null,2);return"\n>>===== MODE =====>>\ncitation\n<<===== MODE =====<<\n\n>>===== KEYS =====>>\n".concat(a,"\n<<===== KEYS =====<<\n\n>>===== DESCRIPTION =====>>\n").concat(r,"\n<<===== DESCRIPTION =====<<\n\n>>===== RESULT =====>>\n").concat(n,"\n<<===== RESULT =====<<\n\n>>===== CITATION-ITEMS =====>>\n[\n").concat(i,"\n]\n<<===== CITATION-ITEMS =====<<\n\n>>===== INPUT =====>>\n").concat(s,"\n<<===== INPUT =====<<\n").trim()}),D=n(18),q=n(101);function K(t,e,n,r,a,i,s){try{var o=t[i](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,a)}var Y=Object(D.a)().base;e.default=function(){var t,e=(t=regeneratorRuntime.mark((function t(e,n,r){var i,s,o,u,c,p,f,h,l,m,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:if(i=window.localStorage.getItem("cite_id"),s=document.getElementById("save-button"),o=i.slice(1),u=window.localStorage.getItem("cite_text"),c=document.getElementById("editor"),p=c.content.innerHTML.replace(/\<u\>/g,'<span class="small-caps">').replace(/\<\/u\>/g,"</span>"),f=document.getElementById("modal-comment").value,p===u){t.next=24;break}return s.classList.add("save-ok"),t.next=13,a()({method:"get",url:"".concat(Y,"/itemdata/").concat(o,".json")}).catch((function(t){return Object(q.a)(t)}));case 13:return h=t.sent,l=[h.data],m={id:"".concat(o)},d=U(l,m,p,f),t.next=19,A(i,d);case 19:return s.classList.remove("save-ok"),t.next=22,r();case 22:t.next=27;break;case 24:s.classList.add("save-not-ok"),s.classList.add("black-wheel"),setTimeout((function(){s.classList.remove("save-not-ok"),s.classList.remove("black-wheel"),r()}),3e3);case 27:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){K(i,r,a,s,o,"next",t)}function o(t){K(i,r,a,s,o,"throw",t)}s(void 0)}))});return function(t,n,r){return e.apply(this,arguments)}}()}}]);