(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{150:function(t,e,n){"use strict";n.d(e,"c",(function(){return z})),n.d(e,"b",(function(){return Y})),n.d(e,"a",(function(){return l}));n(88),n(179),n(52),n(53),n(33),n(93),n(89);var r=n(140),a=n.n(r),i=n(8);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e,n,r,a,i,o){try{var u=t[i](o),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){u(i,r,a,o,c,"next",t)}function c(t){u(i,r,a,o,c,"throw",t)}o(void 0)}))}}var s=function(t,e,n){var r=t.message;e&&(r="".concat(e,": ").concat(r)),n||console.log(r)},p=function(t){return JSON.parse(JSON.stringify(t))},f=function(t){return"style_".concat(t,".txt")},h=Object(i.c)(btoa),l=function(){var t=c(regeneratorRuntime.mark((function t(e,n){var r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.apiMethod?e.apiMethod:"get",i=[e.apiSection,e.repoPath,e.apiSuffix].filter((function(t){return t})).join("/"),t.next=4,a()({method:r,url:"".concat("https://api.github.com","/").concat(i),headers:{Authorization:"token ".concat(e.apiToken)},data:e.params}).catch((function(t){return s(t,"API fail",n)}));case 4:return o=t.sent,t.abrupt("return",!!o&&o.data);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function t(e){o(this,t),this.repo=w.bind({apiToken:e}),this.me=x.bind({apiToken:e})},d=function t(e){o(this,t),e=p(e),this.apiMethod="get",this.apiSection="repos",this.repoPath=e.result.full_name,this.apiSuffix=!1,this.info=g.bind(e),this.fork=y.bind(e),this.commits=S.bind(e),this.patch=I.bind(e),this.getBranch=_.bind(e),this.deleteBranch=E.bind(e),this.setBranch=O.bind(e),this.getContents=C.bind(e),this.updateContents=N.bind(e),this.createPullRequest=U.bind(e),this.getPullRequest=q.bind(e)};function g(){return this.result}function w(t,e){return v.apply(this,arguments)}function v(){return(v=c(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=p(this)).apiMethod="get",r.apiSection="repos",r.repoPath=e,r.apiSuffix=!1,t.next=7,l(r,n);case 7:return r.result=t.sent,t.abrupt("return",new d(r));case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function x(){return b.apply(this,arguments)}function b(){return(b=c(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=p(this)).apiSection="user",t.next=4,l(e);case 4:return e.result=t.sent,t.abrupt("return",new d(e));case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function y(t){return R.apply(this,arguments)}function R(){return(R=c(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=p(this)).apiMethod="post",n.apiSection="repos",n.repoPath=e,n.apiSuffix="forks",t.next=7,l(n);case 7:return n.result=t.sent,t.abrupt("return",new d(n));case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function S(){return k.apply(this,arguments)}function k(){return(k=c(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=p(this)).apiSuffix="commits?sha=master",t.abrupt("return",l(e));case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function I(t){return P.apply(this,arguments)}function P(){return(P=c(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=p(this)).apiMethod="patch",n.apiSuffix="git/refs/heads/master",n.params={sha:e,force:!0},t.abrupt("return",l(n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function _(t,e){return j.apply(this,arguments)}function j(){return(j=c(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=p(this)).apiSuffix="git/ref/heads/".concat(e),t.abrupt("return",l(r,n));case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function E(t){return M.apply(this,arguments)}function M(){return(M=c(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=p(this)).apiMethod="delete",n.apiSuffix="git/refs/heads/".concat(e),t.abrupt("return",l(n));case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function O(t,e){return T.apply(this,arguments)}function T(){return(T=c(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=p(this)).apiMethod="post",r.apiSuffix="git/refs",r.params={ref:"refs/heads/".concat(e),sha:n},t.abrupt("return",l(r));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function C(t){return A.apply(this,arguments)}function A(){return(A=c(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p(this),r=f(e),n.apiSuffix="contents/".concat(r,"?ref=").concat(encodeURIComponent(e)),t.abrupt("return",l(n));case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function N(t,e,n){return J.apply(this,arguments)}function J(){return(J=c(regeneratorRuntime.mark((function t(e,n,r){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p(this),i=f(e),a.apiMethod="put",a.apiSuffix="contents/".concat(i),a.params={message:"Proposed edit",content:n,branch:e},r&&(a.params.sha=r),t.abrupt("return",l(a));case 7:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function U(t,e,n){return B.apply(this,arguments)}function B(){return(B=c(regeneratorRuntime.mark((function t(e,n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=p(this)).apiMethod="post",a.apiSuffix="pulls",a.params={title:"Citation: ".concat(e),head:"".concat(n,":").concat(e),base:"master",body:r,maintainer_can_modify:!0},t.abrupt("return",l(a));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function q(t,e){return D.apply(this,arguments)}function D(){return(D=c(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=p(this)).apiMethod="get",r.apiSuffix="pulls?head=".concat(n,":").concat(e),t.abrupt("return",l(r));case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var L=new function t(){o(this,t),this.client=function(t){return new m(t)}},z=function(){var t=c(regeneratorRuntime.mark((function t(e,n,r){var a,i,o,u,c,p,f,l,m,d,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=window.localStorage.getItem("access_token"),i=L.client(a),t.next=4,i.repo("Juris-M/jsti-indigobook");case 4:return o=t.sent,u=window.localStorage.getItem("cite_userName"),t.next=8,i.repo("".concat(u,"/jsti-indigobook"),!0);case 8:if(c=t.sent,(p=c.info()).full_name){t.next=14;break}return t.next=13,ghme.fork("Juris-M/jsti-indigobook").catch((function(t){return s(t,"create fork")}));case 13:p=t.sent;case 14:return t.next=16,o.commits();case 16:if(0===(f=t.sent).length){t.next=21;break}return l=f[0].sha,t.next=21,c.patch(l);case 21:if(!c.getBranch(e,!0)){t.next=25;break}return t.next=25,c.deleteBranch(e);case 25:return t.next=27,c.setBranch(e,l);case 27:return t.sent,t.next=30,c.getContents(e);case 30:if(p=t.sent,m=h(n),p){t.next=38;break}return t.next=35,c.updateContents(e,m);case 35:p=o.createPullRequest(e,u,r),t.next=44;break;case 38:if(d=p.content.split("\n").join(""),m===d){t.next=44;break}return g=p.sha,t.next=43,c.updateContents(e,m,g);case 43:p=o.createPullRequest(e,u,r);case 44:return t.abrupt("return",p);case 45:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),Y=function(){var t=c(regeneratorRuntime.mark((function t(e){var n,r,a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.localStorage.getItem("access_token"),r=L.client(n),t.next=4,r.repo("Juris-M/jsti-indigobook");case 4:return a=t.sent,t.next=7,r.me();case 7:return i=t.sent,o=i.info(),window.localStorage.setItem("cite_userName",o.login),t.abrupt("return",a.getPullRequest(e,o.login));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},176:function(t,e,n){"use strict";n.r(e);n(90),n(91),n(88),n(32),n(54),n(52),n(53),n(177),n(33),n(55),n(95),n(93),n(92),n(89);var r=n(150),a=n(8);function i(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e,n,r,a,i,o){try{var u=t[i](o),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var c=Object(a.a)(atob),s=function(){var t,e=(t=regeneratorRuntime.mark((function t(){var e,n,a,o,u,s,p,f,h,l,m,d,g,w,v,x,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=window.localStorage.getItem("test_id"),t.next=3,Object(r.b)(e);case 3:if(!(n=t.sent)||!n.length){t.next=26;break}return window.localStorage.setItem("cite_url",n[0].html_url),a=window.localStorage.getItem("cite_userName"),o=window.localStorage.getItem("access_token"),t.next=10,Object(r.a)({apiSection:"repos",repoPath:"".concat(a,"/jsti-indigobook"),apiSuffix:"contents/style_".concat(e,".txt?ref=").concat(e),apiToken:"".concat(o)});case 10:for(u=t.sent,s=c(u.content),p=s.split("\n"),f={},h={open:{},close:{}},l={},m=0,d=["DESCRIPTION","RESULT"];m<d.length;m++)f[g=d[m]]=!1,h.open[g]=new RegExp(">=+\\s+".concat(g,"\\s+=+>")),h.close[g]=new RegExp("<=+\\s+".concat(g,"\\s+=+<"));w=[],v=i(p);try{for(v.s();!(x=v.n()).done;)for(g in b=x.value,(f.DESCRIPTION||f.RESULT)&&w.push(b),f)b.match(h.open[g])?f[g]=!0:b.match(h.close[g])&&(w.pop(),l[g]=w.join("\n"),w=[],f[g]=!1)}catch(t){v.e(t)}finally{v.f()}window.localStorage.setItem("citation",l.RESULT),window.localStorage.setItem("cite_desc",l.DESCRIPTION),t.next=27;break;case 26:window.localStorage.removeItem("cite_desc");case 27:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){u(i,r,a,o,c,"next",t)}function c(t){u(i,r,a,o,c,"throw",t)}o(void 0)}))});return function(){return e.apply(this,arguments)}}();e.default=s},177:function(t,e,n){var r=n(9),a=n(2),i=n(58),o=n(178),u=n(7).f,c=n(34).f,s=n(101),p=n(61),f=n(99),h=n(12),l=n(3),m=n(23).set,d=n(96),g=n(1)("match"),w=a.RegExp,v=w.prototype,x=/a/g,b=/a/g,y=new w(x)!==x,R=f.UNSUPPORTED_Y;if(r&&i("RegExp",!y||R||l((function(){return b[g]=!1,w(x)!=x||w(b)==b||"/a/i"!=w(x,"i")})))){for(var S=function(t,e){var n,r=this instanceof S,a=s(t),i=void 0===e;if(!r&&a&&t.constructor===S&&i)return t;y?a&&!i&&(t=t.source):t instanceof S&&(i&&(e=p.call(t)),t=t.source),R&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var u=o(y?new w(t,e):w(t,e),r?this:v,S);return R&&n&&m(u,{sticky:n}),u},k=function(t){t in S||u(S,t,{configurable:!0,get:function(){return w[t]},set:function(e){w[t]=e}})},I=c(w),P=0;I.length>P;)k(I[P++]);v.constructor=S,S.prototype=v,h(a,"RegExp",S)}d("RegExp")},178:function(t,e,n){var r=n(5),a=n(97);t.exports=function(t,e,n){var i,o;return a&&"function"==typeof(i=e.constructor)&&i!==n&&r(o=i.prototype)&&o!==n.prototype&&a(t,o),t}},179:function(t,e,n){"use strict";var r=n(11),a=n(59).filter,i=n(36),o=n(60),u=i("filter"),c=o("filter");r({target:"Array",proto:!0,forced:!u||!c},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);