(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{156:function(t,e,n){"use strict";n.d(e,"c",(function(){return Y})),n.d(e,"b",(function(){return $})),n.d(e,"a",(function(){return m}));n(95),n(188),n(34),n(57),n(23),n(98),n(96);var r=n(143),a=n.n(r),i=n(7);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e,n,r,a,i,o){try{var u=t[i](o),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){u(i,r,a,o,c,"next",t)}function c(t){u(i,r,a,o,c,"throw",t)}o(void 0)}))}}var s="https://api.github.com",p=function(t,e,n){var r=t.message;e&&(r="".concat(e,": ").concat(r)),n||console.log(r)},f=function(t){return JSON.parse(JSON.stringify(t))},h=function(t){return"style_".concat(t,".txt")},l=Object(i.c)(btoa),m=function(){var t=c(regeneratorRuntime.mark((function t(e,n){var r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.apiMethod?e.apiMethod:"get",i=[e.apiSection,e.repoPath,e.apiSuffix].filter((function(t){return t})).join("/"),t.next=4,a()({method:r,url:"".concat(s,"/").concat(i),headers:{Authorization:"token ".concat(e.apiToken)},data:e.params}).catch((function(t){return p(t,"API fail for ".concat(r," on ").concat(s,"/").concat(i),n)}));case 4:return o=t.sent,t.abrupt("return",!!o&&o.data);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function t(e){o(this,t),this.repo=v.bind({apiToken:e}),this.me=b.bind({apiToken:e})},g=function t(e){o(this,t),e=f(e),this.apiMethod="get",this.apiSection="repos",this.repoPath=e.result.full_name,this.apiSuffix=!1,this.info=w.bind(e),this.fork=R.bind(e),this.commits=k.bind(e),this.patch=P.bind(e),this.getBranch=j.bind(e),this.deleteBranch=M.bind(e),this.setBranch=T.bind(e),this.getContents=A.bind(e),this.updateContents=J.bind(e),this.createPullRequest=B.bind(e),this.getPullRequest=D.bind(e)};function w(){return this.result}function v(t,e){return x.apply(this,arguments)}function x(){return(x=c(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=f(this)).apiMethod="get",r.apiSection="repos",r.repoPath=e,r.apiSuffix=!1,t.next=7,m(r,n);case 7:return r.result=t.sent,t.abrupt("return",new g(r));case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function b(){return y.apply(this,arguments)}function y(){return(y=c(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=f(this)).apiSection="user",t.next=4,m(e);case 4:return e.result=t.sent,t.abrupt("return",new g(e));case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function R(t){return S.apply(this,arguments)}function S(){return(S=c(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=f(this)).apiMethod="post",n.apiSection="repos",n.repoPath=e,n.apiSuffix="forks",t.next=7,m(n);case 7:return n.result=t.sent,t.abrupt("return",new g(n));case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function k(){return I.apply(this,arguments)}function I(){return(I=c(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=f(this)).apiSuffix="commits?sha=master",t.abrupt("return",m(e));case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function P(t){return _.apply(this,arguments)}function _(){return(_=c(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=f(this)).apiMethod="patch",n.apiSuffix="git/refs/heads/master",n.params={sha:e,force:!0},t.abrupt("return",m(n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function j(t,e){return E.apply(this,arguments)}function E(){return(E=c(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=f(this)).apiSuffix="git/ref/heads/".concat(e),t.abrupt("return",m(r,n));case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function M(t){return O.apply(this,arguments)}function O(){return(O=c(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=f(this)).apiMethod="delete",n.apiSuffix="git/refs/heads/".concat(e),t.abrupt("return",m(n));case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function T(t,e){return C.apply(this,arguments)}function C(){return(C=c(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=f(this)).apiMethod="post",r.apiSuffix="git/refs",r.params={ref:"refs/heads/".concat(e),sha:n},t.abrupt("return",m(r));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function A(t){return N.apply(this,arguments)}function N(){return(N=c(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f(this),r=h(e),n.apiSuffix="contents/".concat(r,"?ref=").concat(encodeURIComponent(e)),t.abrupt("return",m(n));case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function J(t,e,n){return U.apply(this,arguments)}function U(){return(U=c(regeneratorRuntime.mark((function t(e,n,r){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=f(this),i=h(e),a.apiMethod="put",a.apiSuffix="contents/".concat(i),a.params={message:"Proposed edit",content:n,branch:e},r&&(a.params.sha=r),t.abrupt("return",m(a));case 7:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function B(t,e,n){return q.apply(this,arguments)}function q(){return(q=c(regeneratorRuntime.mark((function t(e,n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=f(this)).apiMethod="post",a.apiSuffix="pulls",a.params={title:"Citation: ".concat(e),head:"".concat(n,":").concat(e),base:"master",body:r,maintainer_can_modify:!0},t.abrupt("return",m(a));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function D(t,e){return L.apply(this,arguments)}function L(){return(L=c(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=f(this)).apiMethod="get",r.apiSuffix="pulls?head=".concat(n,":").concat(e),t.abrupt("return",m(r));case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var z=new function t(){o(this,t),this.client=function(t){return new d(t)}},Y=function(){var t=c(regeneratorRuntime.mark((function t(e,n,r){var a,i,o,u,c,s,f,h,m,d,g,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=window.localStorage.getItem("access_token"),i=z.client(a),t.next=4,i.me();case 4:return o=t.sent,t.next=7,i.repo("Juris-M/jsti-indigobook");case 7:return u=t.sent,c=window.localStorage.getItem("cite_userName"),t.next=11,i.repo("".concat(c,"/jsti-indigobook"),!0);case 11:if(s=t.sent,(f=s.info()).full_name){t.next=17;break}return t.next=16,o.fork("Juris-M/jsti-indigobook").catch((function(t){return p(t,"create fork")}));case 16:f=t.sent;case 17:return t.next=19,u.commits();case 19:if(0===(h=t.sent).length){t.next=24;break}return m=h[0].sha,t.next=24,s.patch(m);case 24:return t.next=26,s.getBranch(e,!0);case 26:if(!t.sent){t.next=30;break}return t.next=30,s.deleteBranch(e);case 30:return t.next=32,s.setBranch(e,m);case 32:return t.sent,t.next=35,s.getContents(e);case 35:if(f=t.sent,d=l(n),f){t.next=45;break}return t.next=40,s.updateContents(e,d);case 40:return t.next=42,u.createPullRequest(e,c,r);case 42:f=t.sent,t.next=53;break;case 45:if(g=f.content.split("\n").join(""),d===g){t.next=53;break}return w=f.sha,t.next=50,s.updateContents(e,d,w);case 50:return t.next=52,u.createPullRequest(e,c,r);case 52:f=t.sent;case 53:return window.localStorage.setItem("test_content",n),t.abrupt("return",f);case 55:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),$=function(){var t=c(regeneratorRuntime.mark((function t(e){var n,r,a,i,o,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.localStorage.getItem("access_token"),r=z.client(n),t.next=4,r.repo("Juris-M/jsti-indigobook");case 4:return a=t.sent,t.next=7,r.me();case 7:return i=t.sent,o=i.info(),window.localStorage.setItem("cite_userName",o.login),t.next=12,a.getPullRequest(e,o.login);case 12:return u=t.sent,t.abrupt("return",u);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},185:function(t,e,n){"use strict";n.r(e);n(58),n(59),n(95),n(22),n(60),n(34),n(57),n(186),n(23),n(35),n(62),n(98),n(61),n(96);var r=n(156),a=n(7);function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e,n,r,a,i,o){try{var u=t[i](o),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var c=Object(a.a)(atob),s=function(){var t,e=(t=regeneratorRuntime.mark((function t(e){var n,a,o,u,s,p,f,h,l,m,d,g,w,v,x,b,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,a=!1,!window.localStorage.getItem("cite_url")){t.next=7;break}n=window.localStorage.getItem("cite_url"),a=window.localStorage.getItem("test_content"),t.next=17;break;case 7:return t.next=9,Object(r.b)(e);case 9:return(o=t.sent)&&o.length>0&&(n=o[0].html_url,window.localStorage.setItem("cite_url",n)),u=window.localStorage.getItem("cite_userName"),s=window.localStorage.getItem("access_token"),t.next=15,Object(r.a)({apiSection:"repos",repoPath:"".concat(u,"/jsti-indigobook"),apiSuffix:"contents/style_".concat(e,".txt?ref=").concat(e),apiToken:"".concat(s)});case 15:p=t.sent,a=c(p.content);case 17:if(a){for(f=a.split("\n"),h={},l={open:{},close:{}},m={},d=0,g=["DESCRIPTION","RESULT"];d<g.length;d++)h[w=g[d]]=!1,l.open[w]=new RegExp(">=+\\s+".concat(w,"\\s+=+>")),l.close[w]=new RegExp("<=+\\s+".concat(w,"\\s+=+<"));v=[],x=i(f);try{for(x.s();!(b=x.n()).done;)for(w in y=b.value,(h.DESCRIPTION||h.RESULT)&&v.push(y),h)y.match(l.open[w])?h[w]=!0:y.match(l.close[w])&&(v.pop(),m[w]=v.join("\n"),v=[],h[w]=!1)}catch(t){x.e(t)}finally{x.f()}window.localStorage.setItem("citation",m.RESULT),window.localStorage.setItem("cite_desc",m.DESCRIPTION)}else window.localStorage.removeItem("cite_desc");case 18:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){u(i,r,a,o,c,"next",t)}function c(t){u(i,r,a,o,c,"throw",t)}o(void 0)}))});return function(t){return e.apply(this,arguments)}}();e.default=s},186:function(t,e,n){var r=n(10),a=n(2),i=n(66),o=n(187),u=n(8).f,c=n(36).f,s=n(103),p=n(68),f=n(102),h=n(12),l=n(3),m=n(25).set,d=n(100),g=n(1)("match"),w=a.RegExp,v=w.prototype,x=/a/g,b=/a/g,y=new w(x)!==x,R=f.UNSUPPORTED_Y;if(r&&i("RegExp",!y||R||l((function(){return b[g]=!1,w(x)!=x||w(b)==b||"/a/i"!=w(x,"i")})))){for(var S=function(t,e){var n,r=this instanceof S,a=s(t),i=void 0===e;if(!r&&a&&t.constructor===S&&i)return t;y?a&&!i&&(t=t.source):t instanceof S&&(i&&(e=p.call(t)),t=t.source),R&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var u=o(y?new w(t,e):w(t,e),r?this:v,S);return R&&n&&m(u,{sticky:n}),u},k=function(t){t in S||u(S,t,{configurable:!0,get:function(){return w[t]},set:function(e){w[t]=e}})},I=c(w),P=0;I.length>P;)k(I[P++]);v.constructor=S,S.prototype=v,h(a,"RegExp",S)}d("RegExp")},187:function(t,e,n){var r=n(5),a=n(101);t.exports=function(t,e,n){var i,o;return a&&"function"==typeof(i=e.constructor)&&i!==n&&r(o=i.prototype)&&o!==n.prototype&&a(t,o),t}},188:function(t,e,n){"use strict";var r=n(9),a=n(67).filter,i=n(38),o=n(39),u=i("filter"),c=o("filter");r({target:"Array",proto:!0,forced:!u||!c},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);